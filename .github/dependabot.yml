# Dependabot configuration for Maula AI project
# Monitors and updates dependencies across frontend, backend, and root

version: 2

updates:
  # ==========================================
  # Root Package (Monorepo Orchestrator)
  # ==========================================
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
      timezone: "America/New_York"
    open-pull-requests-limit: 5
    reviewers:
      - "aidigitalfriend"
    assignees:
      - "aidigitalfriend"
    labels:
      - "dependencies"
      - "root"
      - "automated"
    commit-message:
      prefix: "chore(root)"
      include: "scope"
    versioning-strategy: "increase"
    ignore:
      # Ignore major version updates for critical packages
      - dependency-name: "*"
        update-types: ["version-update:semver-major"]

  # ==========================================
  # Frontend (Next.js 14 Application)
  # ==========================================
  - package-ecosystem: "npm"
    directory: "/frontend"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "10:00"
      timezone: "America/New_York"
    open-pull-requests-limit: 10
    reviewers:
      - "aidigitalfriend"
    assignees:
      - "aidigitalfriend"
    labels:
      - "dependencies"
      - "frontend"
      - "nextjs"
      - "automated"
    commit-message:
      prefix: "chore(frontend)"
      include: "scope"
    versioning-strategy: "increase"
    groups:
      # Group Next.js related updates
      nextjs:
        patterns:
          - "next"
          - "react"
          - "react-dom"
          - "@next/*"
      # Group UI component libraries
      ui-components:
        patterns:
          - "@headlessui/*"
          - "framer-motion"
          - "lucide-react"
          - "@radix-ui/*"
      # Group TypeScript and linting
      dev-tools:
        patterns:
          - "typescript"
          - "eslint*"
          - "@typescript-eslint/*"
          - "prettier"
      # Group Tailwind CSS
      styling:
        patterns:
          - "tailwindcss"
          - "postcss"
          - "autoprefixer"
          - "@tailwindcss/*"
      # Group AI SDK updates
      ai-sdks:
        patterns:
          - "@anthropic-ai/*"
          - "openai"
          - "@google/generative-ai"
          - "cohere-ai"
    ignore:
      # Pin Next.js to avoid breaking changes
      - dependency-name: "next"
        update-types: ["version-update:semver-major"]
      # Pin React to avoid breaking changes
      - dependency-name: "react"
        update-types: ["version-update:semver-major"]
      - dependency-name: "react-dom"
        update-types: ["version-update:semver-major"]

  # ==========================================
  # Backend (Express + Next.js API)
  # ==========================================
  - package-ecosystem: "npm"
    directory: "/backend"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "11:00"
      timezone: "America/New_York"
    open-pull-requests-limit: 10
    reviewers:
      - "aidigitalfriend"
    assignees:
      - "aidigitalfriend"
    labels:
      - "dependencies"
      - "backend"
      - "api"
      - "automated"
    commit-message:
      prefix: "chore(backend)"
      include: "scope"
    versioning-strategy: "increase"
    groups:
      # Group Express and middleware
      express:
        patterns:
          - "express"
          - "express-*"
          - "cors"
          - "helmet"
          - "morgan"
      # Group AI provider SDKs
      ai-providers:
        patterns:
          - "@anthropic-ai/*"
          - "openai"
          - "@google/generative-ai"
          - "cohere-ai"
          - "@huggingface/*"
      # Group database and caching
      database:
        patterns:
          - "@prisma/*"
          - "prisma"
          - "redis"
          - "ioredis"
      # Group authentication
      auth:
        patterns:
          - "jsonwebtoken"
          - "bcrypt*"
          - "passport*"
          - "next-auth"
      # Group payment processing
      payment:
        patterns:
          - "stripe"
          - "@paypal/*"
          - "paypal-*"
      # Group AWS services
      aws:
        patterns:
          - "@aws-sdk/*"
          - "aws-sdk"
      # Group email services
      email:
        patterns:
          - "nodemailer"
          - "@sendgrid/*"
          - "resend"
      # Group WebSocket
      websocket:
        patterns:
          - "socket.io"
          - "socket.io-client"
          - "ws"
    ignore:
      # Security packages - always keep up to date (no ignores)
      # Prisma - careful with major versions
      - dependency-name: "prisma"
        update-types: ["version-update:semver-major"]
      - dependency-name: "@prisma/client"
        update-types: ["version-update:semver-major"]

  # ==========================================
  # GitHub Actions Workflows
  # ==========================================
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "tuesday"
      time: "09:00"
      timezone: "America/New_York"
    open-pull-requests-limit: 5
    reviewers:
      - "aidigitalfriend"
    assignees:
      - "aidigitalfriend"
    labels:
      - "dependencies"
      - "github-actions"
      - "ci-cd"
      - "automated"
    commit-message:
      prefix: "chore(ci)"
      include: "scope"

  # ==========================================
  # Docker (if you decide to use it later)
  # ==========================================
  - package-ecosystem: "docker"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "wednesday"
      time: "09:00"
      timezone: "America/New_York"
    open-pull-requests-limit: 3
    reviewers:
      - "aidigitalfriend"
    assignees:
      - "aidigitalfriend"
    labels:
      - "dependencies"
      - "docker"
      - "automated"
    commit-message:
      prefix: "chore(docker)"
      include: "scope"

# ==========================================
# Security Updates Configuration
# ==========================================
# Dependabot automatically creates PRs for security updates
# even if they're outside the scheduled interval.
# You can configure security update behavior in repository settings.

# ==========================================
# Configuration Notes:
# ==========================================
# 1. Schedule: Updates check on Mondays/Tuesdays/Wednesdays
# 2. Timezone: Set to America/New_York (adjust as needed)
# 3. Groups: Related packages updated together to reduce PR noise
# 4. Ignore: Major version updates for critical packages (Next.js, React, Prisma)
# 5. Labels: Automatic labeling for easy filtering
# 6. Reviewers/Assignees: Set to project owner
# 7. Open PR Limit: Prevents too many PRs at once
# 8. Commit Message: Conventional commits format for changelog
#
# To customize:
# - Change timezone to your local timezone
# - Update reviewers/assignees to your GitHub username
# - Adjust open-pull-requests-limit based on your workflow
# - Modify ignore rules based on your upgrade strategy
# - Add more groups if you have specific package clusters
